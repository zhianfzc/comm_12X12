#include "isp_type.h"
#include "isp_print.h"
#include "isp_i2c.h"
#include "isp_sns_ctrl.h"
#include "XAx_cmos.h"


//Mclk: 27M
//Pclk: 198M
//Active:2880*1620
//Total:4000*1650*30fps
//mipi:10bit 2lane
static const ISP_U16 gau16SnsInit_sc500AI_2LANE[][2] = {
	{0x0100,0x00},
	{0x36e9,0x80},
	{0x36f9,0x80},
	{0x3018,0x32},
	{0x3019,0x0c},
	{0x301f,0x1a},
	{0x320c,0x07},
	{0x320d,0xd0},
	{0x3253,0x0a},
	{0x3301,0x08},
	{0x3302,0x18},
	{0x3303,0x10},
	{0x3304,0x60},
	{0x3306,0x60},
	{0x3308,0x10},
	{0x3309,0x70},
	{0x330a,0x01},
	{0x330b,0x30},
	{0x330d,0x18},
	{0x330e,0x20},
	{0x330f,0x02},
	{0x3310,0x02},
	{0x331c,0x04},
	{0x331e,0x51},
	{0x331f,0x61},
	{0x3320,0x09},
	{0x3333,0x10},
	{0x334c,0x08},
	{0x3356,0x09},
	{0x3364,0x17},
	{0x336d,0x03},
	{0x3390,0x08},
	{0x3391,0x18},
	{0x3392,0x38},
	{0x3393,0x0a},
	{0x3394,0x20},
	{0x3395,0x20},
	{0x3396,0x08},
	{0x3397,0x18},
	{0x3398,0x38},
	{0x3399,0x08},
	{0x339a,0x20},
	{0x339b,0x40},
	{0x339c,0x80},
	{0x33ac,0x10},
	{0x33ae,0x10},
	{0x33af,0x19},
	{0x360f,0x01},
	{0x3622,0x03},
	{0x363a,0x1f},
	{0x363c,0x40},
	{0x3651,0x7d},
	{0x3670,0x0a},
	{0x3671,0x07},
	{0x3672,0x17},
	{0x3673,0x1e},
	{0x3674,0x82},
	{0x3675,0x64},
	{0x3676,0x66},
	{0x367a,0x48},
	{0x367b,0x78},
	{0x367c,0x58},
	{0x367d,0x78},
	{0x3690,0x34},
	{0x3691,0x34},
	{0x3692,0x54},		//0x64
	{0x369c,0x48},
	{0x369d,0x78},
	{0x36ea,0x35},
	{0x36eb,0x0c},
	{0x36ec,0x0a},
	{0x36ed,0x24},
	{0x3904,0x04},
	{0x3908,0x41},
	{0x391d,0x04},
	{0x39c2,0x30},
	{0x3e01,0xcd},
	{0x3e02,0xc0},
	{0x3e16,0x00},
	{0x3e17,0x80},
	{0x4500,0x88},
	{0x4509,0x20},
	{0x4837,0x10},
	{0x5799,0x00},
	{0x59e0,0x60},
	{0x59e1,0x08},
	{0x59e2,0x3f},
	{0x59e3,0x18},
	{0x59e4,0x18},
	{0x59e5,0x3f},
	{0x59e7,0x02},
	{0x59e8,0x38},
	{0x59e9,0x20},
	{0x59ea,0x0c},
	{0x59ec,0x08},
	{0x59ed,0x02},
	{0x59ee,0xa0},
	{0x59ef,0x08},
	{0x59f4,0x18},
	{0x59f5,0x10},
	{0x59f6,0x0c},
	{0x59f9,0x02},
	{0x59fa,0x18},
	{0x59fb,0x10},
	{0x59fc,0x0c},
	{0x59ff,0x02},
	{0x36e9,0x44},
	{0x36f9,0x24},
	{0x4800,0x04},	// mipi 连续
	{0x3250,0xff},				//mipi连续
	{0x0100,0x01},
};

//Mclk: 27M
//Pclk: 198M
//Active:2880*1620
//Total:4000*1650*30fps
//mipi 10bit 4lane
static const ISP_U16 gau16SnsInit_sc500AI_4LANE[][2] = {
	{0x0100,0x00},
	{0x36e9,0x80},
	{0x36f9,0x80},
	{0x301f,0x19},
	//2688*1628
	{0x3200,0x00},
	{0x3201,0x00},
	{0x3202,0x00},
	{0x3203,0x00},
	{0x3204,0x0b},
	{0x3205,0x4b},
	{0x3206,0x06},
	{0x3207,0x5f},
	{0x3208,0x0b},
	{0x3209,0x48},
	{0x320a,0x06},
	{0x320b,0x5c},
	{0x3210,0x00},
	{0x3211,0x02},
	{0x3212,0x00},
	{0x3213,0x02},

	{0x320c,0x07},
	{0x320d,0xd0},
	{0x3250,0x40},
	{0x3253,0x0a},
	{0x3301,0x08},
	{0x3302,0x18},
	{0x3303,0x10},
	{0x3304,0x60},
	{0x3306,0x60},
	{0x3308,0x10},
	{0x3309,0x70},
	{0x330a,0x01},
	{0x330b,0x30},
	{0x330d,0x18},
	{0x330e,0x20},
	{0x330f,0x02},
	{0x3310,0x02},
	{0x331c,0x04},
	{0x331e,0x51},
	{0x331f,0x61},
	{0x3320,0x09},
	{0x3333,0x10},
	{0x334c,0x08},
	{0x3356,0x09},
	{0x3364,0x17},
	{0x336d,0x03},
	{0x3390,0x08},
	{0x3391,0x18},
	{0x3392,0x38},
	{0x3393,0x0a},
	{0x3394,0x20},
	{0x3395,0x20},
	{0x3396,0x08},
	{0x3397,0x18},
	{0x3398,0x38},
	{0x3399,0x08},
	{0x339a,0x20},
	{0x339b,0x40},
	{0x339c,0x80},
	{0x33ac,0x10},
	{0x33ae,0x10},
	{0x33af,0x19},
	{0x360f,0x01},
	{0x3622,0x03},
	{0x363a,0x1f},
	{0x363c,0x40},
	{0x3651,0x7d},
	{0x3670,0x0a},
	{0x3671,0x07},
	{0x3672,0x17},
	{0x3673,0x1e},
	{0x3674,0x82},
	{0x3675,0x64},
	{0x3676,0x66},
	{0x367a,0x48},
	{0x367b,0x78},
	{0x367c,0x58},
	{0x367d,0x78},
	{0x3690,0x34},
	{0x3691,0x34},
	{0x3692,0x54},
	{0x369c,0x48},
	{0x369d,0x78},
	{0x36ea,0x35},
	{0x36eb,0x0c},
	{0x36ec,0x1a},
	{0x36ed,0x24},
	{0x3904,0x04},
	{0x3908,0x41},
	{0x391d,0x04},
	{0x39c2,0x30},
	{0x3e01,0xcd},
	{0x3e02,0xc0},
	{0x3e16,0x00},
	{0x3e17,0x80},
	{0x4500,0x88},
	{0x4509,0x20},
	{0x4837,0x20},
	{0x5799,0x00},
	{0x59e0,0x60},
	{0x59e1,0x08},
	{0x59e2,0x3f},
	{0x59e3,0x18},
	{0x59e4,0x18},
	{0x59e5,0x3f},
	{0x59e7,0x02},
	{0x59e8,0x38},
	{0x59e9,0x20},
	{0x59ea,0x0c},
	{0x59ec,0x08},
	{0x59ed,0x02},
	{0x59ee,0xa0},
	{0x59ef,0x08},
	{0x59f4,0x18},
	{0x59f5,0x10},
	{0x59f6,0x0c},
	{0x59f9,0x02},
	{0x59fa,0x18},
	{0x59fb,0x10},
	{0x59fc,0x0c},
	{0x59ff,0x02},
	{0x36e9,0x44},
	{0x36f9,0x24},
	{0x4800,0x04},	// mipi 连续
	{0x3250,0xff},	// mipi 连续	  0x40
	{0x0100,0x01},
};


void sensor_init_sc500AI(ISP_DEV IspDev)
{
	ISP_U16 u16Num,u16i;
	if( (gstSnsAttr[IspDev].u8MipiAttr&0x0f) == MIPI_4LANE)		//MIPI_4LANE
	{
		u16Num = sizeof(gau16SnsInit_sc500AI_4LANE)/sizeof(gau16SnsInit_sc500AI_4LANE[0]);
		for(u16i=1; u16i < u16Num; u16i++)
		{
			sensor_write_register(IspDev,(ISP_U32)gau16SnsInit_sc500AI_4LANE[u16i][0], (ISP_U32)gau16SnsInit_sc500AI_4LANE[u16i][1]);
		}
		XM_MPI_ISP_USleep(20000);
		DEBUG("------------- sc500AI 5M init ok! (@20201030_4lane) ----------------\n");
	}
	else												//MIPI_2LANE
	{
		u16Num = sizeof(gau16SnsInit_sc500AI_2LANE)/sizeof(gau16SnsInit_sc500AI_2LANE[0]);
		for(u16i=1; u16i < u16Num; u16i++)
		{
			sensor_write_register(IspDev,(ISP_U32)gau16SnsInit_sc500AI_2LANE[u16i][0], (ISP_U32)gau16SnsInit_sc500AI_2LANE[u16i][1]);
		}
		XM_MPI_ISP_USleep(20000);
		DEBUG("------------- sc500AI 5M init ok! (@20220421_2lane) ----------------\n");
	}
	
}




