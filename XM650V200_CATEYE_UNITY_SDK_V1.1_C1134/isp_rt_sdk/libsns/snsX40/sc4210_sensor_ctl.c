#include "isp_type.h"
#include "isp_print.h"
#include "isp_i2c.h"
#include "isp_sns_ctrl.h"
#include "XAx_cmos.h"


//Mclk: 27M
//Pclk: 126M
//Active:2560x1448
//30fps
//mipi 12bit 4lane
static const ISP_U16 gau16SnsInit_sc4210[][2] = {
	{0x0103,0x01},
	{0x0100,0x00},
	{0x36e9,0x80},
	{0x36f9,0x80},
	{0x3001,0x07},
	{0x3002,0xc0},
	{0x300a,0x2c},
	{0x300f,0x00},
	{0x3018,0x73},
	{0x301f,0x4d},
	{0x3031,0x0c},
	{0x3038,0x22},
	{0x3200,0x00},
	{0x3201,0x00},
	{0x3202,0x00},
	{0x3203,0x00},
	{0x3204,0x0a},
	{0x3205,0x0f},
	{0x3206,0x05},
	{0x3207,0xaf},
	{0x3208,0x0a},
	{0x3209,0x00},
	{0x320a,0x05},
	{0x320b,0xa8},
	{0x320c,0x05},
	{0x320d,0x46},
	{0x3210,0x00},
	{0x3211,0x08},
	{0x3212,0x00},
	{0x3213,0x04},
	{0x3220,0x10},
	{0x3225,0x01},
	{0x3000,0x00},
	{0x3227,0x03},
	{0x3229,0x08},
	{0x3231,0x01},
	{0x3241,0x02},
	{0x3243,0x03},
	{0x3249,0x17},
	{0x3251,0x08},
	{0x3253,0x08},
	{0x325e,0x00},
	{0x325f,0x00},
	{0x3273,0x01},
	{0x3301,0x28},
	{0x3302,0x18},
	{0x3304,0x20},
	{0x3305,0x00},
	{0x3306,0x74},
	{0x3308,0x10},
	{0x3309,0x40},
	{0x330a,0x00},
	{0x330b,0xe8},
	{0x330e,0x18},
	{0x3312,0x02},
	{0x3314,0x84},
	{0x331e,0x19},
	{0x331f,0x39},
	{0x3320,0x05},
	{0x3338,0x10},
	{0x334c,0x10},
	{0x335d,0x20},
	{0x3366,0x92},
	{0x3367,0x08},
	{0x3368,0x05},
	{0x3369,0xdc},
	{0x336a,0x0b},
	{0x336b,0xb8},
	{0x336c,0xc2},
	{0x337a,0x08},
	{0x337b,0x10},
	{0x337e,0x40},
	{0x33a3,0x0c},
	{0x33e0,0xa0},
	{0x33e1,0x08},
	{0x33e2,0x00},
	{0x33e3,0x10},
	{0x33e4,0x10},
	{0x33e5,0x00},
	{0x33e6,0x10},
	{0x33e7,0x10},
	{0x33e8,0x00},
	{0x33e9,0x10},
	{0x33ea,0x16},
	{0x33eb,0x00},
	{0x33ec,0x10},
	{0x33ed,0x18},
	{0x33ee,0xa0},
	{0x33ef,0x08},
	{0x33f4,0x00},
	{0x33f5,0x10},
	{0x33f6,0x10},
	{0x33f7,0x00},
	{0x33f8,0x10},
	{0x33f9,0x10},
	{0x33fa,0x00},
	{0x33fb,0x10},
	{0x33fc,0x16},
	{0x33fd,0x00},
	{0x33fe,0x10},
	{0x33ff,0x18},
	{0x360f,0x05},
	{0x3622,0xff},
	{0x3624,0x07},
	{0x3625,0x02},
	{0x3630,0xc4},
	{0x3631,0x80},
	{0x3632,0x88},
	{0x3633,0x22},
	{0x3634,0x64},
	{0x3635,0x20},
	{0x3636,0x20},
	{0x3638,0x28},
	{0x363b,0x03},
	{0x363c,0x06},
	{0x363d,0x06},
	{0x366e,0x04},
	{0x3670,0x48},
	{0x3671,0xff},
	{0x3672,0x1f},
	{0x3673,0x1f},
	{0x367a,0x40},
	{0x367b,0x40},
	{0x3690,0x42},
	{0x3691,0x44},
	{0x3692,0x44},
	{0x3699,0x80},
	{0x369a,0x9f},
	{0x369b,0x9f},
	{0x369c,0x40},
	{0x369d,0x40},
	{0x36a2,0x40},
	{0x36a3,0x40},
	{0x36cc,0x2c},
	{0x36cd,0x30},
	{0x36ce,0x30},
	{0x36d0,0x20},
	{0x36d1,0x40},
	{0x36d2,0x40},
	{0x36ea,0x39},
	{0x36eb,0x16},
	{0x36ec,0x03},
	{0x36ed,0x1c},
	{0x36fa,0x37},
	{0x36fb,0x14},
	{0x36fc,0x00},
	{0x36fd,0x2c},
	{0x3817,0x20},
	{0x3905,0xd8},
	{0x3908,0x11},
	{0x391b,0x80},
	{0x391c,0x0f},
	{0x391d,0x01},
	{0x3933,0x24},
	{0x3934,0xb0},
	{0x3935,0x80},
	{0x3936,0x1f},
	{0x3940,0x68},
	{0x3942,0x04},
	{0x3943,0xc0},
	{0x3980,0x00},
	{0x3981,0x50},
	{0x3982,0x00},
	{0x3983,0x40},
	{0x3984,0x00},
	{0x3985,0x20},
	{0x3986,0x00},
	{0x3987,0x10},
	{0x3988,0x00},
	{0x3989,0x20},
	{0x398a,0x00},
	{0x398b,0x30},
	{0x398c,0x00},
	{0x398d,0x50},
	{0x398e,0x00},
	{0x398f,0x60},
	{0x3990,0x00},
	{0x3991,0x70},
	{0x3992,0x00},
	{0x3993,0x36},
	{0x3994,0x00},
	{0x3995,0x20},
	{0x3996,0x00},
	{0x3997,0x14},
	{0x3998,0x00},
	{0x3999,0x20},
	{0x399a,0x00},
	{0x399b,0x50},
	{0x399c,0x00},
	{0x399d,0x90},
	{0x399e,0x00},
	{0x399f,0xf0},
	{0x39a0,0x08},
	{0x39a1,0x10},
	{0x39a2,0x20},
	{0x39a3,0x40},
	{0x39a4,0x20},
	{0x39a5,0x10},
	{0x39a6,0x08},
	{0x39a7,0x04},
	{0x39a8,0x18},
	{0x39a9,0x30},
	{0x39aa,0x40},
	{0x39ab,0x60},
	{0x39ac,0x38},
	{0x39ad,0x20},
	{0x39ae,0x10},
	{0x39af,0x08},
	{0x39b9,0x00},
	{0x39ba,0xa0},
	{0x39bb,0x80},
	{0x39bc,0x00},
	{0x39bd,0x44},
	{0x39be,0x00},
	{0x39bf,0x00},
	{0x39c0,0x00},
	{0x39c5,0x41},
	{0x3e00,0x00},
	{0x3e01,0xbb},
	{0x3e02,0x40},
	{0x3e03,0x0b},
	{0x3e06,0x00},
	{0x3e07,0x80},
	{0x3e08,0x03},
	{0x3e09,0x40},
	{0x3e0e,0x6a},
	{0x3e26,0x40},
	{0x4401,0x0b},
	{0x4407,0xb0},
	{0x4418,0x0b},
	{0x4501,0xb4},
	{0x4509,0x10},
	{0x4603,0x00},
	{0x4837,0x2a},
	{0x5000,0x0e},
	{0x550f,0x20},
	{0x5784,0x10},
	{0x5785,0x08},
	{0x5787,0x06},
	{0x5788,0x06},
	{0x5789,0x00},
	{0x578a,0x06},
	{0x578b,0x06},
	{0x578c,0x00},
	{0x5790,0x10},
	{0x5791,0x10},
	{0x5792,0x00},
	{0x5793,0x10},
	{0x5794,0x10},
	{0x5795,0x00},
	{0x57c4,0x10},
	{0x57c5,0x08},
	{0x57c7,0x06},
	{0x57c8,0x06},
	{0x57c9,0x00},
	{0x57ca,0x06},
	{0x57cb,0x06},
	{0x57cc,0x00},
	{0x57d0,0x10},
	{0x57d1,0x10},
	{0x57d2,0x00},
	{0x57d3,0x10},
	{0x57d4,0x10},
	{0x57d5,0x00},
	{0x36e9,0x24},
	{0x36f9,0x20},
	{0x0100,0x01},
};

//Mclk: 27M
//Pclk: 297M
//TotalSize: 3960 * 3000 * 25fps
//Active:2560x1440
//mipi 10bit 4lane  HDR
static const ISP_U16 gau16SnsInit_sc4210_HDR[][2] = {
	{0x0100,0x00},
	{0x36e9,0x80},
	{0x36f9,0x80},
	{0x3001,0x07},
	{0x3002,0xc0},
	{0x300a,0x2c},
	{0x300f,0x00},
	{0x3018,0x73},
	{0x301f,0x54},
	{0x3031,0x0a},
	{0x3038,0x22},
	{0x3207,0xa7},
	{0x320c,0x06},
	{0x320d,0x54},
	{0x320e,0x0b},
	{0x320f,0xb8},
	{0x3213,0x04},
	{0x3220,0x50},
	{0x3225,0x01},
	{0x3227,0x03},
	{0x3229,0x08},
	{0x3231,0x01},
	{0x3241,0x02},
	{0x3243,0x03},
	{0x3249,0x17},
	{0x3250,0x3f},
	{0x3251,0x08},
	{0x3253,0x10},
	{0x325e,0x00},
	{0x3000,0x00},
	{0x325f,0x00},
	{0x3273,0x01},
	{0x3301,0x15},
	{0x3302,0x18},
	{0x3304,0x20},
	{0x3305,0x00},
	{0x3306,0x78},
	{0x3308,0x10},
	{0x3309,0x50},
	{0x330a,0x00},
	{0x330b,0xe8},
	{0x330e,0x20},
	{0x3312,0x02},
	{0x3314,0x84},
	{0x331e,0x19},
	{0x331f,0x49},
	{0x3320,0x05},
	{0x3338,0x10},
	{0x334c,0x10},
	{0x335d,0x20},
	{0x335e,0x02},
	{0x335f,0x04},
	{0x3360,0x20},
	{0x3362,0x72},
	{0x3364,0x1e},
	{0x3366,0x92},
	{0x3367,0x08},
	{0x3368,0x0b},
	{0x3369,0x08},
	{0x336a,0x16},
	{0x336b,0x10},
	{0x336c,0xc2},
	{0x337a,0x08},
	{0x337b,0x10},
	{0x337c,0x06},
	{0x337d,0x0a},
	{0x337e,0x40},
	{0x3390,0x08},
	{0x3391,0x18},
	{0x3392,0x38},
	{0x3393,0x13},
	{0x3394,0x24},
	{0x3395,0x24},
	{0x3396,0x08},
	{0x3397,0x18},
	{0x3398,0x38},
	{0x3399,0x11},
	{0x339a,0x14},
	{0x339b,0x24},
	{0x339c,0x24},
	{0x33a2,0x08},
	{0x33a3,0x0c},
	{0x33e0,0xa0},
	{0x33e1,0x08},
	{0x33e2,0x00},
	{0x33e3,0x10},
	{0x33e4,0x10},
	{0x33e5,0x00},
	{0x33e6,0x10},
	{0x33e7,0x10},
	{0x33e8,0x00},
	{0x33e9,0x10},
	{0x33ea,0x16},
	{0x33eb,0x00},
	{0x33ec,0x10},
	{0x33ed,0x18},
	{0x33ee,0xa0},
	{0x33ef,0x08},
	{0x33f4,0x00},
	{0x33f5,0x10},
	{0x33f6,0x10},
	{0x33f7,0x00},
	{0x33f8,0x10},
	{0x33f9,0x10},
	{0x33fa,0x00},
	{0x33fb,0x10},
	{0x33fc,0x16},
	{0x33fd,0x00},
	{0x33fe,0x10},
	{0x33ff,0x18},
	{0x360f,0x05},
	{0x3622,0xff},
	{0x3624,0x07},
	{0x3625,0x0a},
	{0x3630,0xc4},
	{0x3631,0x80},
	{0x3632,0x88},
	{0x3633,0x42},
	{0x3634,0x64},
	{0x3635,0x20},
	{0x3636,0x20},
	{0x3638,0x28},
	{0x363b,0x03},
	{0x363c,0x06},
	{0x363d,0x06},
	{0x366e,0x04},
	{0x3670,0x4a},
	{0x3671,0xff},
	{0x3672,0x9f},
	{0x3673,0x9f},
	{0x3674,0xc4},
	{0x3675,0xc4},
	{0x3676,0xb8},
	{0x367a,0x40},
	{0x367b,0x48},
	{0x367c,0x40},
	{0x367d,0x48},
	{0x3690,0x43},
	{0x3691,0x55},
	{0x3692,0x66},
	{0x3699,0x8c},
	{0x369a,0x96},
	{0x369b,0x9f},
	{0x369c,0x40},
	{0x369d,0x48},
	{0x36a2,0x40},
	{0x36a3,0x48},
	{0x36cc,0x2c},
	{0x36cd,0x30},
	{0x36ce,0x30},
	{0x36d0,0x20},
	{0x36d1,0x40},
	{0x36d2,0x40},
	{0x36ea,0x35},
	{0x36eb,0x06},
	{0x36ec,0x03},
	{0x36ed,0x2c},
	{0x36fa,0x37},
	{0x36fb,0x04},
	{0x36fc,0x00},
	{0x36fd,0x2c},
	{0x3817,0x20},		// 0x20
	{0x3905,0x98},
	{0x3908,0x11},
	{0x391b,0x80},
	{0x391c,0x0f},
	{0x391d,0x21},
	{0x3933,0x1f},
	{0x3934,0xff},
	{0x3935,0x80},
	{0x3936,0x1f},
	{0x393e,0x01},
	{0x3940,0x60},
	{0x3942,0x04},
	{0x3943,0xd0},
	{0x3980,0x00},
	{0x3981,0x30},
	{0x3982,0x00},
	{0x3983,0x2c},
	{0x3984,0x00},
	{0x3985,0x15},
	{0x3986,0x00},
	{0x3987,0x10},
	{0x3988,0x00},
	{0x3989,0x30},
	{0x398a,0x00},
	{0x398b,0x28},
	{0x398c,0x00},
	{0x398d,0x30},
	{0x398e,0x00},
	{0x398f,0x70},
	{0x3990,0x0a},
	{0x3991,0x00},
	{0x3992,0x00},
	{0x3993,0x60},
	{0x3994,0x00},
	{0x3995,0x30},
	{0x3996,0x00},
	{0x3997,0x10},
	{0x3998,0x00},
	{0x3999,0x1c},
	{0x399a,0x00},
	{0x399b,0x48},
	{0x399c,0x00},
	{0x399d,0x90},
	{0x399e,0x00},
	{0x399f,0xc0},
	{0x39a0,0x14},
	{0x39a1,0x28},
	{0x39a2,0x48},
	{0x39a3,0x70},
	{0x39a4,0x18},
	{0x39a5,0x04},
	{0x39a6,0x08},
	{0x39a7,0x04},
	{0x39a8,0x01},
	{0x39a9,0x14},
	{0x39aa,0x28},
	{0x39ab,0x50},
	{0x39ac,0x30},
	{0x39ad,0x20},
	{0x39ae,0x10},
	{0x39af,0x08},
	{0x39b9,0x00},
	{0x39ba,0x00},
	{0x39bb,0x00},
	{0x39bc,0x00},
	{0x39bd,0x58},
	{0x39be,0xc0},
	{0x39bf,0x00},
	{0x39c0,0x00},
	{0x39c5,0x41},
	{0x3c09,0x4a},
	{0x3c10,0x04},
	{0x3c11,0x20},
	{0x3c12,0x04},
	{0x3c13,0x20},
	{0x3c14,0x0f},
	{0x3e00,0x01},
	{0x3e01,0x5e},
	{0x3e02,0x00},
	{0x3e03,0x0b},
	{0x3e04,0x15},
	{0x3e05,0xe0},
	{0x3e06,0x00},
	{0x3e07,0x80},
	{0x3e08,0x03},
	{0x3e09,0x40},
	{0x3e0e,0x6a},
	{0x3e10,0x00},
	{0x3e11,0x80},
	{0x3e12,0x03},
	{0x3e13,0x40},
	{0x3e23,0x00},
	{0x3e24,0xb0},
	{0x3e26,0x40},
	{0x4401,0x0b},
	{0x4407,0xb0},
	{0x4418,0x16},
	{0x4501,0xa4},
	{0x4509,0x08},
	{0x4603,0x00},
	{0x4800,0x04},
	{0x4816,0x11},
	{0x4819,0x40},
	{0x4829,0x01},
	{0x4837,0x16},
	{0x5000,0x0e},
	{0x550f,0x20},
	{0x5784,0x10},
	{0x5785,0x08},
	{0x5787,0x06},
	{0x5788,0x06},
	{0x5789,0x00},
	{0x578a,0x06},
	{0x578b,0x06},
	{0x578c,0x00},
	{0x5790,0x10},
	{0x5791,0x10},
	{0x5792,0x00},
	{0x5793,0x10},
	{0x5794,0x10},
	{0x5795,0x00},
	{0x57c4,0x10},
	{0x57c5,0x08},
	{0x57c7,0x06},
	{0x57c8,0x06},
	{0x57c9,0x00},
	{0x57ca,0x06},
	{0x57cb,0x06},
	{0x57cc,0x00},
	{0x57d0,0x10},
	{0x57d1,0x10},
	{0x57d2,0x00},
	{0x57d3,0x10},
	{0x57d4,0x10},
	{0x57d5,0x00},
	{0x36e9,0x20},
	{0x36f9,0x20},
	{0x0100,0x01},
};
	
void sensor_init_sc4210(ISP_DEV IspDev)
{
	ISP_U16 u16Num,u16i;
#if 0
	u16Num = sizeof(gau16SnsInit_sc4210)/sizeof(gau16SnsInit_sc4210[0]);
	for(u16i=0; u16i < u16Num; u16i++)
	{
		sensor_write_register(IspDev,(ISP_U32)gau16SnsInit_sc4210[u16i][0], (ISP_U32)gau16SnsInit_sc4210[u16i][1]);
	}
	XM_MPI_ISP_USleep(20000);
	DEBUG("------------- sc4210 4M init ok! (@20210827_4lane) ----------------\n");
#else
	u16Num = sizeof(gau16SnsInit_sc4210_HDR)/sizeof(gau16SnsInit_sc4210_HDR[0]);
	for(u16i=0; u16i < u16Num; u16i++)
	{
		sensor_write_register(IspDev,(ISP_U32)gau16SnsInit_sc4210_HDR[u16i][0], (ISP_U32)gau16SnsInit_sc4210_HDR[u16i][1]);
	}
	XM_MPI_ISP_USleep(20000);
	DEBUG("------------- sc4210 4M HDR init ok! (@20220902_4lane) ----------------\n");
#endif
}



